{"version":3,"sources":["app.js","index.js"],"names":["express","require","Client","qrcode","app","client","use","json","post","req","res","phoneNumber","message","body","sendMessage","then","status","success","catch","error","get","toDataURL","qrCode","err","url","send","on","qr","console","log","initialize","module","exports","port","listen"],"mappings":";AAAA,MAAMA,EAAUC,QAAQ,YAClB,OAAEC,GAAWD,QAAQ,mBACrBE,EAASF,QAAQ,UAEjBG,EAAMJ,IACNK,EAAS,IAAIH,EAEnBE,EAAIE,IAAIN,EAAQO,QAGhBH,EAAII,KAAK,gBAAiB,CAACC,EAAKC,KAC9B,MAAM,YAAEC,EAAW,QAAEC,GAAYH,EAAII,KAGrCR,EAAOS,YAAYH,EAAY,QAASC,GACrCG,KAAK,KACJL,EAAIM,OAAO,KAAKT,KAAK,CAAEU,SAAS,EAAML,QAAS,6BAEhDM,MAAOC,IACNT,EAAIM,OAAO,KAAKT,KAAK,CAAEU,SAAS,EAAOL,QAAS,uBAAwBO,MAAOA,EAAMP,cAK3FR,EAAIgB,IAAI,WAAY,CAACX,EAAKC,KAExBP,EAAOkB,UAAUhB,EAAOiB,OAAQ,CAACC,EAAKC,KAChCD,EACFb,EAAIM,OAAO,KAAKT,KAAK,CAAEU,SAAS,EAAOL,QAAS,+BAGhDF,EAAIM,OAAO,KAAKS,kBAAkBD,2BAMxCnB,EAAOqB,GAAG,KAAOC,IAEftB,EAAOiB,OAASK,IAGlBtB,EAAOqB,GAAG,QAAS,KACjBE,QAAQC,IAAI,kCAGdxB,EAAOyB,aAEPC,OAAOC,QAAU5B;;AChDjB,MAAMA,EAAMH,QAAQ,SAEdgC,EAAO,OAEb7B,EAAI8B,OAAOD,EAAM,KACfL,QAAQC,IAAK","file":"index.js","sourceRoot":"../src","sourcesContent":["const express = require('express');\r\nconst { Client } = require('whatsapp-web.js');\r\nconst qrcode = require('qrcode');\r\n\r\nconst app = express();\r\nconst client = new Client();\r\n\r\napp.use(express.json());\r\n\r\n// Endpoint untuk mengirim pesan WhatsApp\r\napp.post('/send-message', (req, res) => {\r\n  const { phoneNumber, message } = req.body;\r\n\r\n  // Kirim pesan ke nomor HP yang ditentukan\r\n  client.sendMessage(phoneNumber+'@c.us', message)\r\n    .then(() => {\r\n      res.status(200).json({ success: true, message: 'Pesan berhasil dikirim' });\r\n    })\r\n    .catch((error) => {\r\n      res.status(500).json({ success: false, message: 'Gagal mengirim pesan', error: error.message });\r\n    });\r\n});\r\n\r\n// Endpoint untuk mendapatkan QR code\r\napp.get('/qr-code', (req, res) => {\r\n  // Generate QR code menggunakan session dari client WhatsApp\r\n  qrcode.toDataURL(client.qrCode, (err, url) => {\r\n    if (err) {\r\n      res.status(500).json({ success: false, message: 'Gagal menghasilkan QR code' });\r\n    } else {\r\n      // Kirim QR code sebagai respons\r\n      res.status(200).send(`<img src=\"${url}\" alt=\"QR Code\" />`);\r\n    }\r\n  });\r\n});\r\n\r\n// Inisialisasi WhatsApp client\r\nclient.on('qr', (qr) => {\r\n  // QR code tersedia, dapatkan URL-nya\r\n  client.qrCode = qr;\r\n});\r\n\r\nclient.on('ready', () => {\r\n  console.log('Bot WhatsApp sudah terhubung');\r\n});\r\n\r\nclient.initialize();\r\n\r\nmodule.exports = app;","const app = require('./app');\r\n\r\nconst port = '8888';\r\n\r\napp.listen(port, () => {\r\n  console.log(`Server is listening on port ${port}...`);\r\n});"]}